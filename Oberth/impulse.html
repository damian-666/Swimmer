<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbital Simulation with Impulse Kicker</title>
    <style>
        canvas {
            background: black;
            display: block;
            margin: 0 auto;
        }
        body {
            text-align: center;
            color: white;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <h1>Orbital Simulation with Impulse Kick</h1>
    <canvas id="orbitCanvas" width="600" height="600"></canvas>
    <label for="impulseSlider">Impulse Magnitude:</label>
    <input type="range" id="impulseSlider" min="0.1" max="5" step="0.1" value="1.5">
    <button id="impulseButton">Apply Impulse</button>
    <script>
        const canvas = document.getElementById("orbitCanvas");
        const ctx = canvas.getContext("2d");
        const G = 1;  // Simplified gravitational constant
        const M = 1000;  // Mass of the central body

        let body = {
            x: 300, y: 100,
            vx: 0.5, vy: 1.0,
            mass: 200
        };

        let kicker = {
            x: body.x + 10, y: body.y + 10,
            vx: 0.3, vy: 0.3,
            mass: 20
        };

        const centralBody = { x: 300, y: 300 };
        const slider = document.getElementById("impulseSlider");

        function updatePosition(body, kicker, dt) {
            const applyGravity = (obj) => {
                const dx = centralBody.x - obj.x;
                const dy = centralBody.y - obj.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const force = (G * M * obj.mass) / (distance * distance);
                const ax = force * (dx / distance) / obj.mass;
                const ay = force * (dy / distance) / obj.mass;
                obj.vx += ax * dt;
                obj.vy += ay * dt;
                obj.x += obj.vx * dt;
                obj.y += obj.vy * dt;
            };

            // Apply gravitational force to both bodies
            applyGravity(body);
            applyGravity(kicker);

            // Magnetic-like constraint force to pull kicker back to body, simulating a slider constraint
            const kdx = body.x - kicker.x;
            const kdy = body.y - kicker.y;
            const kickerDistance = Math.sqrt(kdx * kdx + kdy * kdy);
            const constraintForce = kickerDistance > 20 ? 0.05 : 0;
            kicker.vx += constraintForce * (kdx / kickerDistance);
            kicker.vy += constraintForce * (kdy / kickerDistance);
            kicker.x += kicker.vx * dt;
            kicker.y += kicker.vy * dt;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.beginPath();
            ctx.arc(centralBody.x, centralBody.y, 10, 0, 2 * Math.PI);
            ctx.fillStyle = "yellow";
            ctx.fill();

            ctx.beginPath();
            ctx.arc(body.x, body.y, 5, 0, 2 * Math.PI);
            ctx.fillStyle = "white";
            ctx.fill();

            ctx.beginPath();
            ctx.arc(kicker.x, kicker.y, 5, 0, 2 * Math.PI);
            ctx.fillStyle = "red";
            ctx.fill();
        }

        function applyImpulse() {
            const dx = body.x - centralBody.x;
            const dy = body.y - centralBody.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const impulseMagnitude = parseFloat(slider.value);

            if (distance < 120) {
                body.vx += impulseMagnitude * (dx / distance);
                body.vy += impulseMagnitude * (dy / distance);
                kicker.vx -= impulseMagnitude * (dx / distance);
                kicker.vy -= impulseMagnitude * (dy / distance);
            }
        }

        document.getElementById("impulseButton").addEventListener("click", applyImpulse);

        function loop() {
            updatePosition(body, kicker, 0.1);
            draw();
            requestAnimationFrame(loop);
        }

        loop();
    </script>
</body>
</html>
